<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Client</title>

  <link rel="stylesheet" type="text/css" href="dist/doofinder.css">
  <style type="text/css">
    * {
      box-sizing: border-box;
    }

    .m {
      margin-bottom: 1rem;
    }

    .w {
      width: 320px;
    }

    .b {
      border: 1px solid #ccc;
    }

    .q {
      padding: .25rem;
    }

    .s {
      position: relative;
      height: 400px;
      overflow: auto;
    }

    .df-term {
      display: block;
    }
  </style>

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="dist/doofinder.js"></script>
  <script type="text/javascript" src="node_modules/bean/bean.js"></script>
</head>
<body>
  <input class="w m q" type="text" id="query" autofocus>
  <div class="w m b s" id="scroll"></div>
  <div class="w m b" id="category"></div>
  <div class="w m b" id="brand"></div>
  <div class="w m b" id="price"></div>

  <script type="text/javascript">
    var client = new doofinder.Client('e723b503db15fe242b934df14b141ccc', 'eu1', null, ['product', 'recipe']);
    var queryInputWidget = new doofinder.widgets.QueryInput('#query');
    var resultsWidget = new doofinder.widgets.ScrollResults('#scroll');
    var priceWidget = new doofinder.widgets.RangeFacet('#price', 'best_price', {
      templateVars: {label: 'Price'}
    });
    var categoryWidget = new doofinder.widgets.TermFacet('#category', 'categories', {
      templateVars: {label: 'Category'}
    });
    var brandWidget = new doofinder.widgets.TermFacet('#brand', 'brand', {
      templateVars: {label: 'Brand'}
    });

    priceWidget.bind('df:rendered', function(res){
      console.log(res);
    });

    controller = new doofinder.Controller(client, [
      queryInputWidget,
      resultsWidget,
      categoryWidget,
      brandWidget,
      priceWidget
    ]);

    client.search('silla', {
      filter: {
        brand: ['JANE', 'Bower &#+? Wilkins']
      },
      exclude: {
        brand: ['CONCORD', 'BE COOL']
      },
      sort: [{"_score": "desc"}, {"brand": "desc"}]
    }, function(){})
  </script>
</body>
</html>
